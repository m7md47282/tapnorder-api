{
  "openapi": "3.0.3",
  "info": {
    "title": "TabNorder POS System API",
    "description": "Comprehensive Point of Sale (POS) system API for cafes and restaurants with order management, kitchen operations, cashier functions, and business analytics.",
    "version": "1.0.0",
    "contact": {
      "name": "TabNorder API Support",
      "email": "support@tabnorder.com"
    }
  },
  "servers": [
    {
      "url": "https://us-central1-tab-n-order.cloudfunctions.net",
      "description": "Production server"
    },
    {
      "url": "http://localhost:5001/tab-n-order/us-central1",
      "description": "Local development server"
    }
  ],
  "paths": {
    "/healthCheck": {
      "get": {
        "tags": ["Health"],
        "summary": "Health check endpoint",
        "description": "Returns the health status of the API",
        "responses": {
          "200": {
            "description": "API is healthy",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "Login and retrieve user profile",
        "description": "Authenticates a user with email and password, persists the user record in TabNorder, and returns the combined profile payload plus session tokens.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User logged in successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid login credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - credentials rejected",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Auth"],
        "summary": "Get current user profile",
        "description": "Returns the persisted user profile for the caller. Requires the session token returned from /login or /signup in the Authorization header (Bearer) or query parameter.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "schema": {
              "type": "string",
              "example": "Bearer <id_token>"
            },
            "description": "Bearer token containing the session ID token"
          },
          {
            "name": "idToken",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Alternative location for the login token if Authorization header is not available"
          }
        ],
        "responses": {
          "200": {
            "description": "Authenticated user retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - token missing",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - token verification failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/signup": {
      "post": {
        "tags": ["Auth"],
        "summary": "Register a new user",
        "description": "Registers a new user with email and password, persists the record in TabNorder, and returns the combined profile payload plus session tokens.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SignupRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid signup fields",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - signup request rejected",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - user already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/menu": {
      "get": {
        "tags": ["Menu"],
        "summary": "Get menu by place ID",
        "description": "Retrieves the menu for a specific place/restaurant",
        "parameters": [
          {
            "name": "placeId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the place/restaurant"
          }
        ],
        "responses": {
          "200": {
            "description": "Menu retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid placeId",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Menu not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Menu"],
        "summary": "Create menu for place",
        "description": "Creates a new menu for a specific place/restaurant",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMenuRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Menu created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid menu data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/items": {
      "get": {
        "tags": ["Items"],
        "summary": "Get items with optional filters",
        "description": "Retrieves items with optional filtering using query parameters. Supports filtering by menuId, categoryId, isAvailable, and search.",
        "parameters": [
          {
            "name": "menuId",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by menu ID (also accepts menu_id for backward compatibility)",
            "example": "menu123"
          },
          {
            "name": "categoryId",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by category name or category ID. Can filter by category ID from the categories entity (see /categories endpoint) or by category name string stored directly in items (also accepts category_id for backward compatibility).",
            "example": "sweets"
          },
          {
            "name": "isAvailable",
            "in": "query",
            "schema": {
              "type": "boolean"
            },
            "description": "Filter by availability - true or false (also accepts is_available for backward compatibility)",
            "example": true
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search term for item name or description (also accepts q for backward compatibility)",
            "example": "pizza"
          }
        ],
        "responses": {
          "200": {
            "description": "Items retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid query parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Items"],
        "summary": "Create new item",
        "description": "Creates a new menu item. Supports both 'category' and 'categoryId' fields. Use 'categoryId' to reference a category from the categories entity (see /categories endpoint), or use 'category' to store a category name as a string directly in the item.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateItemCommand"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Item created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid item data or missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Items"],
        "summary": "Update item",
        "description": "Updates an existing menu item. Item ID can be provided in the URL path (/items/{id}) or in the request body ({\"id\": \"...\"}). Supports both 'category' and 'categoryId' fields. Use 'categoryId' to reference a category from the categories entity (see /categories endpoint), or use 'category' to store a category name as a string directly in the item.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateItemCommand"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Item updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing item ID or invalid data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Items"],
        "summary": "Delete item",
        "description": "Deletes a menu item. Item ID should be provided in the request body or query parameter.",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Item ID to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Item deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing item ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/categories": {
      "get": {
        "tags": ["Categories"],
        "summary": "Get categories with optional filters",
        "description": "Retrieves category entities with optional filtering using query parameters. Categories are full entities with their own table, supporting metadata like displayOrder, isActive, description, and imageUrl. Items can reference categories by ID using the categoryId field. Supports filtering by menuId, isActive, and search.",
        "parameters": [
          {
            "name": "menuId",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by menu ID (also accepts menu_id for backward compatibility)",
            "example": "menu123"
          },
          {
            "name": "isActive",
            "in": "query",
            "schema": {
              "type": "boolean"
            },
            "description": "Filter by active status - true or false (also accepts is_active for backward compatibility)",
            "example": true
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search term for category name or description (also accepts q for backward compatibility)",
            "example": "appetizers"
          }
        ],
        "responses": {
          "200": {
            "description": "Categories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid query parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Categories"],
        "summary": "Create new category",
        "description": "Creates a new menu category entity. Categories can be referenced by items using the categoryId field. Categories support metadata like displayOrder, isActive, description, and imageUrl.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCategoryCommand"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Category created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid category data or missing required fields",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Categories"],
        "summary": "Update category",
        "description": "Updates an existing category entity. Category ID should be provided in the URL path (/categories/{id}) or in the request body ({\"id\": \"...\"}). Categories can be referenced by items using the categoryId field.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCategoryCommand"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Category updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing category ID or invalid data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Categories"],
        "summary": "Delete category",
        "description": "Deletes a category. Category ID should be provided in the URL path.",
        "responses": {
          "200": {
            "description": "Category deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing category ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/categories/{id}": {
      "get": {
        "tags": ["Categories"],
        "summary": "Get category by ID",
        "description": "Retrieves a specific category by its ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Category ID",
            "example": "category123"
          }
        ],
        "responses": {
          "200": {
            "description": "Category retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing category ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Category not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/addonGroups": {
      "get": {
        "tags": ["Addons"],
        "summary": "Get addon groups",
        "description": "Retrieves addon groups with optional filters",
        "parameters": [
          {
            "name": "placeId",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by place ID"
          },
          {
            "name": "menuId",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by menu ID"
          },
          {
            "name": "categoryId",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by category ID"
          },
          {
            "name": "itemId",
            "in": "query",
            "schema": { "type": "string" },
            "description": "Filter by item ID"
          },
          {
            "name": "isActive",
            "in": "query",
            "schema": { "type": "boolean" }
          },
          {
            "name": "search",
            "in": "query",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Addon groups retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/AddonGroup" }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Addons"],
        "summary": "Create addon group",
        "description": "Creates a reusable addon group definition",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAddonGroupCommand"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Addon group created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AddonGroup"
                }
              }
            }
          }
        }
      }
    },
    "/addonGroups/{id}": {
      "get": {
        "tags": ["Addons"],
        "summary": "Get addon group by ID",
        "description": "Retrieves a specific addon group",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Addon group retrieved successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AddonGroup" }
              }
            }
          },
          "404": {
            "description": "Addon group not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Addons"],
        "summary": "Update addon group",
        "description": "Updates an existing addon group",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAddonGroupCommand"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Addon group updated successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AddonGroup" }
              }
            }
          },
          "404": {
            "description": "Addon group not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Addons"],
        "summary": "Delete addon group",
        "description": "Deletes an addon group",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Addon group deleted successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ApiResponse" }
              }
            }
          },
          "404": {
            "description": "Addon group not found",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/itemDetail": {
      "get": {
        "tags": ["Items"],
        "summary": "Get item by ID",
        "description": "Retrieves a specific item by its ID. ID is extracted from the path parameter.",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Item ID (extracted from path)"
          }
        ],
        "responses": {
          "200": {
            "description": "Item retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing item ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Item not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Items"],
        "summary": "Update item",
        "description": "Updates an existing menu item. ID is extracted from the path parameter.",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Item ID (extracted from path)"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateItemCommand"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Item updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing item ID or invalid data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Item not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Items"],
        "summary": "Delete item",
        "description": "Deletes a menu item. ID is extracted from the path parameter.",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Item ID (extracted from path)"
          }
        ],
        "responses": {
          "200": {
            "description": "Item deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing item ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Item not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/place": {
      "get": {
        "tags": ["Place"],
        "summary": "Get place by ID",
        "description": "Retrieves a specific place/restaurant by its ID",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the place/restaurant"
          }
        ],
        "responses": {
          "200": {
            "description": "Place retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "Place not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Place"],
        "summary": "Create new place",
        "description": "Creates a new place/restaurant",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlaceRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Place created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid place data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Place"],
        "summary": "Update place",
        "description": "Updates an existing place/restaurant",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdatePlaceRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Place updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "Place not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Place"],
        "summary": "Delete place",
        "description": "Deletes a place/restaurant",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "The ID of the place to delete"
          }
        ],
        "responses": {
          "200": {
            "description": "Place deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "Place not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/orders": {
      "get": {
        "tags": ["Orders"],
        "summary": "Get orders with filtering",
        "description": "Retrieves orders with comprehensive filtering options using query parameters",
        "parameters": [
          {
            "name": "place_id",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by place ID"
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["pending", "confirmed", "preparing", "ready", "completed", "cancelled"]
            },
            "description": "Filter by order status"
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["dine_in", "takeout", "delivery", "pickup"]
            },
            "description": "Filter by order type"
          },
          {
            "name": "customer_id",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by customer ID"
          },
          {
            "name": "date_from",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter orders from this date"
          },
          {
            "name": "date_to",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter orders to this date"
          },
          {
            "name": "order_number",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by order number"
          },
          {
            "name": "source",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["pos", "online", "mobile_app", "phone"]
            },
            "description": "Filter by order source"
          },
          {
            "name": "search",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search term for order number, customer name, etc."
          },
          {
            "name": "q",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Alternative search parameter (same as search)"
          }
        ],
        "responses": {
          "200": {
            "description": "Orders retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid query parameters",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Orders"],
        "summary": "Create new order",
        "description": "Creates a new order",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateOrderCommand"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Order created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid order data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/orders/realtime": {
      "get": {
        "tags": ["Orders", "Real-time"],
        "summary": "Get real-time orders",
        "description": "Establishes a Server-Sent Events (SSE) connection for real-time order updates",
        "parameters": [
          {
            "name": "placeId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Place ID"
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Comma-separated list of statuses to filter (e.g., pending,confirmed,preparing)"
          }
        ],
        "responses": {
          "200": {
            "description": "Real-time orders stream established",
            "content": {
              "text/event-stream": {
                "schema": {
                  "type": "string",
                  "description": "Server-Sent Events stream with order updates"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing placeId",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/orders/realtime/status": {
      "get": {
        "tags": ["Orders", "Real-time"],
        "summary": "Get real-time orders by status",
        "description": "Establishes a Server-Sent Events (SSE) connection for real-time order updates filtered by status",
        "parameters": [
          {
            "name": "placeId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Place ID"
          },
          {
            "name": "status",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Comma-separated list of statuses (e.g., pending,confirmed,preparing)"
          }
        ],
        "responses": {
          "200": {
            "description": "Real-time orders by status stream established",
            "content": {
              "text/event-stream": {
                "schema": {
                  "type": "string",
                  "description": "Server-Sent Events stream with filtered order updates"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing placeId or status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/orders/realtime/{id}": {
      "get": {
        "tags": ["Orders", "Real-time"],
        "summary": "Get real-time single order",
        "description": "Establishes a Server-Sent Events (SSE) connection for real-time updates of a specific order",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Order ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Real-time single order stream established",
            "content": {
              "text/event-stream": {
                "schema": {
                  "type": "string",
                  "description": "Server-Sent Events stream with single order updates"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing order ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/orders/realtime/connections": {
      "get": {
        "tags": ["Orders", "Real-time"],
        "summary": "Get active connections",
        "description": "Retrieves information about active real-time connections",
        "responses": {
          "200": {
            "description": "Active connections retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/orderDetail": {
      "get": {
        "tags": ["Orders"],
        "summary": "Get order by ID",
        "description": "Retrieves a specific order by its ID. ID is extracted from the path parameter.",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Order ID (extracted from path)"
          }
        ],
        "responses": {
          "200": {
            "description": "Order retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing order ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Order not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Orders"],
        "summary": "Update order status",
        "description": "Updates the status of an existing order. ID is extracted from the path parameter.",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Order ID (extracted from path)"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateOrderStatusRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Order status updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing order ID or invalid data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Order not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/orderSearch": {
      "get": {
        "tags": ["Orders"],
        "summary": "Search orders",
        "description": "Searches orders with various criteria",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search query"
          },
          {
            "name": "orderNumber",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search by order number"
          },
          {
            "name": "customerName",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Search by customer name"
          }
        ],
        "responses": {
          "200": {
            "description": "Search results retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/ordersRealtime": {
      "get": {
        "tags": ["Orders", "Real-time"],
        "summary": "Get real-time orders",
        "description": "Retrieves real-time order updates",
        "parameters": [
          {
            "name": "placeId",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by place ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Real-time orders retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/orderRealtimeStatus": {
      "get": {
        "tags": ["Orders", "Real-time"],
        "summary": "Get real-time orders by status",
        "description": "Retrieves real-time orders filtered by status",
        "parameters": [
          {
            "name": "placeId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Place ID"
          },
          {
            "name": "status",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "enum": ["pending", "confirmed", "preparing", "ready", "completed", "cancelled"]
            },
            "description": "Order status to filter by"
          }
        ],
        "responses": {
          "200": {
            "description": "Real-time orders by status retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/orderRealtimeSingle": {
      "get": {
        "tags": ["Orders", "Real-time"],
        "summary": "Get single real-time order",
        "description": "Retrieves a single order with real-time updates",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Order ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Real-time order retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "Order not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart": {
      "get": {
        "tags": ["Cart"],
        "summary": "Get cart by ID",
        "description": "Retrieves a specific cart by its ID",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Cart retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing cart ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["Cart"],
        "summary": "Create new cart",
        "description": "Creates a new shopping cart",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCartRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Cart created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid cart data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Cart"],
        "summary": "Update cart",
        "description": "Updates an existing cart by ID",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCartRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cart updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing cart ID or invalid data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Cart"],
        "summary": "Delete cart",
        "description": "Deletes a cart by ID",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Cart deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing cart ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/{id}": {
      "get": {
        "tags": ["Cart"],
        "summary": "Get cart by ID",
        "description": "Retrieves a specific cart by its ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Cart retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["Cart"],
        "summary": "Update cart by ID",
        "description": "Updates an existing cart by its ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCartRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cart updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Cart"],
        "summary": "Delete cart by ID",
        "description": "Deletes a cart by its ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Cart deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/place/{placeId}": {
      "get": {
        "tags": ["Cart"],
        "summary": "Get carts by place ID",
        "description": "Retrieves carts for a specific place with optional filtering",
        "parameters": [
          {
            "name": "placeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Place ID"
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["active", "abandoned", "converted"]
            },
            "description": "Filter by cart status"
          },
          {
            "name": "customerId",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by customer ID"
          },
          {
            "name": "sessionId",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by session ID"
          },
          {
            "name": "source",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["pos", "online", "mobile_app", "phone"]
            },
            "description": "Filter by cart source"
          },
          {
            "name": "dateFrom",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter carts from this date"
          },
          {
            "name": "dateTo",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter carts to this date"
          }
        ],
        "responses": {
          "200": {
            "description": "Carts retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid placeId",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/customer/{customerId}": {
      "get": {
        "tags": ["Cart"],
        "summary": "Get carts by customer ID",
        "description": "Retrieves carts for a specific customer with optional filtering",
        "parameters": [
          {
            "name": "customerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Customer ID"
          },
          {
            "name": "placeId",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by place ID"
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["active", "abandoned", "converted"]
            },
            "description": "Filter by cart status"
          },
          {
            "name": "source",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["pos", "online", "mobile_app", "phone"]
            },
            "description": "Filter by cart source"
          },
          {
            "name": "dateFrom",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter carts from this date"
          },
          {
            "name": "dateTo",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter carts to this date"
          }
        ],
        "responses": {
          "200": {
            "description": "Carts retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid customerId",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/active": {
      "get": {
        "tags": ["Cart"],
        "summary": "Get active cart by customer ID and place ID",
        "description": "Retrieves the active cart for a specific customer and place",
        "parameters": [
          {
            "name": "customerId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Customer ID"
          },
          {
            "name": "placeId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Place ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Active cart retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing customerId or placeId",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Active cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/active/session/{sessionId}/place/{placeId}": {
      "get": {
        "tags": ["Cart"],
        "summary": "Get active cart by session ID and place ID",
        "description": "Retrieves the active cart for a specific session and place",
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session ID"
          },
          {
            "name": "placeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Place ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Active cart retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing sessionId or placeId",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Active cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/{cartId}/items": {
      "post": {
        "tags": ["Cart"],
        "summary": "Add item to cart",
        "description": "Adds a new item to the cart",
        "parameters": [
          {
            "name": "cartId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddItemToCartCommand"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Item added to cart successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid item data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/{cartId}/items/{itemId}": {
      "put": {
        "tags": ["Cart"],
        "summary": "Update cart item",
        "description": "Updates the quantity or special instructions of a cart item",
        "parameters": [
          {
            "name": "cartId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          },
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Item ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCartItemCommand"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cart item updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid update data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart or item not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Cart"],
        "summary": "Remove item from cart",
        "description": "Removes an item from the cart",
        "parameters": [
          {
            "name": "cartId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          },
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Item ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Item removed from cart successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart or item not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/{cartId}/clear": {
      "post": {
        "tags": ["Cart"],
        "summary": "Clear all items from cart",
        "description": "Removes all items from the cart",
        "parameters": [
          {
            "name": "cartId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Cart cleared successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/{cartId}/discount": {
      "post": {
        "tags": ["Cart"],
        "summary": "Apply discount to cart",
        "description": "Applies a discount code to the cart",
        "parameters": [
          {
            "name": "cartId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApplyDiscountCommand"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Discount applied successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid discount data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Cart"],
        "summary": "Remove discount from cart",
        "description": "Removes the applied discount from the cart",
        "parameters": [
          {
            "name": "cartId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Discount removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/{cartId}/convert": {
      "post": {
        "tags": ["Cart"],
        "summary": "Convert cart to order",
        "description": "Converts a cart to an order",
        "parameters": [
          {
            "name": "cartId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Cart ID"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConvertCartToOrderCommand"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Cart converted to order successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - invalid conversion data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Cart not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/statistics/{placeId}": {
      "get": {
        "tags": ["Cart"],
        "summary": "Get cart statistics",
        "description": "Retrieves cart statistics for a specific place",
        "parameters": [
          {
            "name": "placeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Place ID"
          },
          {
            "name": "dateFrom",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter statistics from this date"
          },
          {
            "name": "dateTo",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date-time"
            },
            "description": "Filter statistics to this date"
          }
        ],
        "responses": {
          "200": {
            "description": "Cart statistics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid placeId",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/cart/popular/{placeId}": {
      "get": {
        "tags": ["Cart"],
        "summary": "Get popular cart items",
        "description": "Retrieves the most popular items across all carts for a specific place",
        "parameters": [
          {
            "name": "placeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Place ID"
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10
            },
            "description": "Maximum number of popular items to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Popular cart items retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid placeId",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/attachments": {
      "post": {
        "tags": ["Attachments"],
        "summary": "Upload attachment",
        "description": "Uploads a file attachment to Firebase Storage and returns the attachment URL. Accepts base64 encoded file in JSON body.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UploadAttachmentRequest"
              },
              "example": {
                "file": "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==",
                "fileName": "example.png",
                "mimeType": "image/png",
                "uploadedBy": "user123",
                "relatedEntityType": "item",
                "relatedEntityId": "item456",
                "folder": "attachments",
                "metadata": {
                  "description": "Item image"
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Attachment uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiResponse"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/Attachment"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing or invalid file data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation error - file type or size not allowed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Attachments"],
        "summary": "Get attachments with filters",
        "description": "Retrieves attachments with optional filtering using query parameters",
        "parameters": [
          {
            "name": "uploaded_by",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by user ID who uploaded the file",
            "example": "user123"
          },
          {
            "name": "related_entity_type",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by related entity type (e.g., 'item', 'menu', 'place')",
            "example": "item"
          },
          {
            "name": "related_entity_id",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by related entity ID",
            "example": "item456"
          },
          {
            "name": "file_type",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by file extension (e.g., 'png', 'jpg', 'pdf')",
            "example": "png"
          },
          {
            "name": "mime_type",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filter by MIME type",
            "example": "image/png"
          }
        ],
        "responses": {
          "200": {
            "description": "Attachments retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiResponse"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Attachment"
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/attachments/{id}": {
      "get": {
        "tags": ["Attachments"],
        "summary": "Get attachment by ID",
        "description": "Retrieves a specific attachment by its ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Attachment ID",
            "example": "attachment123"
          }
        ],
        "responses": {
          "200": {
            "description": "Attachment retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiResponse"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "data": {
                          "$ref": "#/components/schemas/Attachment"
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing attachment ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Attachment not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["Attachments"],
        "summary": "Delete attachment",
        "description": "Deletes an attachment from Firebase Storage and removes its metadata",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Attachment ID",
            "example": "attachment123"
          }
        ],
        "responses": {
          "200": {
            "description": "Attachment deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing attachment ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Attachment not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/attachments/{id}/signed-url": {
      "get": {
        "tags": ["Attachments"],
        "summary": "Get signed URL for attachment",
        "description": "Generates a temporary signed URL for accessing a private attachment. The URL expires after the specified time.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Attachment ID",
            "example": "attachment123"
          },
          {
            "name": "expiresIn",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 604800,
              "default": 3600
            },
            "description": "Expiration time in seconds (default: 3600, max: 604800 = 7 days)",
            "example": 3600
          }
        ],
        "responses": {
          "200": {
            "description": "Signed URL generated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    {
                      "$ref": "#/components/schemas/ApiResponse"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "object",
                          "properties": {
                            "signedUrl": {
                              "type": "string",
                              "format": "uri",
                              "description": "Temporary signed URL for accessing the attachment",
                              "example": "https://storage.googleapis.com/bucket/path?X-Goog-Algorithm=..."
                            },
                            "expiresIn": {
                              "type": "integer",
                              "description": "Expiration time in seconds",
                              "example": 3600
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - missing attachment ID or invalid expiration time",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Attachment not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "HealthResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "status": {
            "type": "string",
            "example": "OK"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "version": {
            "type": "string",
            "example": "1.0.0"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email address"
          },
          "password": {
            "type": "string",
            "format": "password",
            "description": "User password"
          },
          "deviceInfo": {
            "oneOf": [
              { "type": "object" },
              { "type": "string" }
            ],
            "description": "Optional metadata about the device initiating the login"
          },
          "metadata": {
            "type": "object",
            "description": "Additional metadata to persist with the user session"
          },
          "roleId": {
            "type": "integer",
            "description": "Optional role identifier override"
          }
        }
      },
      "SignupRequest": {
        "allOf": [
          { "$ref": "#/components/schemas/LoginRequest" },
          {
            "type": "object",
            "properties": {
              "displayName": {
                "type": "string",
                "description": "Display name to set for the user"
              },
              "roleKey": {
                "type": "string",
                "description": "Optional role name (e.g., ADMIN, CASHIER)"
              },
              "preferences": {
                "type": "object",
                "description": "Custom user preferences to persist on signup"
              },
              "places": {
                "type": "array",
                "description": "Optional list of place IDs to associate with the user",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        ]
      },
      "AuthSuccessResponse": {
        "allOf": [
          { "$ref": "#/components/schemas/ApiResponse" },
          {
            "type": "object",
            "properties": {
              "data": {
                "type": "object",
                "properties": {
                  "user": {
                    "$ref": "#/components/schemas/UserProfile"
                  },
                  "identityProfile": {
                    "$ref": "#/components/schemas/IdentityProfile"
                  },
                  "expiresAt": {
                    "type": "string",
                    "format": "date-time"
                  },
                  "token": {
                    "type": "string",
                    "description": "Session token (Firebase ID token)"
                  },
                  "refreshToken": {
                    "type": "string",
                    "description": "Refresh token for renewing the session",
                    "nullable": true
                  }
                }
              }
            }
          }
        ]
      },
      "UserProfile": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "firebaseUid": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "emailVerified": { "type": "boolean" },
          "phoneNumber": { "type": "string" },
          "displayName": { "type": "string" },
          "photoUrl": { "type": "string", "format": "uri" },
          "providerIds": {
            "type": "array",
            "items": { "type": "string" }
          },
          "roleId": { "type": "integer" },
          "role": { "type": "integer", "description": "Enum representing the user role ID" },
          "status": {
            "type": "string",
            "enum": ["active", "invited", "suspended", "disabled"]
          },
          "lastLoginAt": { "type": "string", "format": "date-time" },
          "lastLoginIp": { "type": "string" },
          "tenantId": { "type": "string", "nullable": true },
          "customClaims": { "type": "object" },
          "preferences": { "type": "object" },
          "metadata": { "type": "object" },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        }
      },
      "IdentityProfile": {
        "type": "object",
        "properties": {
          "uid": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "displayName": { "type": "string" },
          "photoUrl": { "type": "string", "format": "uri" },
          "phoneNumber": { "type": "string" },
          "emailVerified": { "type": "boolean" },
          "providerIds": {
            "type": "array",
            "items": { "type": "string" }
          },
          "tenantId": { "type": "string", "nullable": true },
          "customClaims": { "type": "object" },
          "creationTime": { "type": "string" },
          "lastLoginAt": { "type": "string" }
        }
      },
      "ApiResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "object"
          },
          "message": {
            "type": "string"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadata": {
            "type": "object",
            "properties": {
              "timestamp": {
                "type": "string",
                "format": "date-time"
              },
              "version": {
                "type": "string"
              },
              "requestId": {
                "type": "string"
              }
            }
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string"
          },
          "error": {
            "type": "string"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "Place": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "address": {
            "$ref": "#/components/schemas/Address"
          },
          "contact": {
            "$ref": "#/components/schemas/Contact"
          },
          "businessHours": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/BusinessHours"
            }
          },
          "settings": {
            "$ref": "#/components/schemas/PlaceSettings"
          },
          "status": {
            "type": "string",
            "enum": ["active", "inactive", "suspended", "pending_approval"]
          },
          "ownerId": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Address": {
        "type": "object",
        "properties": {
          "street": {
            "type": "string"
          },
          "city": {
            "type": "string"
          },
          "state": {
            "type": "string"
          },
          "zipCode": {
            "type": "string"
          },
          "country": {
            "type": "string"
          },
          "coordinates": {
            "$ref": "#/components/schemas/Coordinates"
          }
        }
      },
      "Coordinates": {
        "type": "object",
        "properties": {
          "latitude": {
            "type": "number"
          },
          "longitude": {
            "type": "number"
          }
        }
      },
      "Contact": {
        "type": "object",
        "properties": {
          "phone": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "website": {
            "type": "string"
          }
        }
      },
      "BusinessHours": {
        "type": "object",
        "properties": {
          "open": {
            "type": "string",
            "pattern": "^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$"
          },
          "close": {
            "type": "string",
            "pattern": "^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$"
          },
          "isOpen": {
            "type": "boolean"
          }
        }
      },
      "PlaceSettings": {
        "type": "object",
        "properties": {
          "currency": {
            "type": "string"
          },
          "timezone": {
            "type": "string"
          },
          "language": {
            "type": "string"
          },
          "allowOnlineOrders": {
            "type": "boolean"
          },
          "requireOrderConfirmation": {
            "type": "boolean"
          },
          "minimumOrderAmount": {
            "type": "number"
          },
          "deliveryFee": {
            "type": "number"
          },
          "serviceFee": {
            "type": "number"
          },
          "taxRate": {
            "type": "number"
          }
        }
      },
      "Item": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "categoryId": {
            "type": "string",
            "description": "Category ID from the categories entity (see /categories endpoint) OR category name as a string. Categories can be managed entities with metadata or simple string values stored directly in items."
          },
          "imageUrl": {
            "type": "string"
          },
          "isAvailable": {
            "type": "boolean"
          },
          "preparationTime": {
            "type": "number"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "specs": {
            "$ref": "#/components/schemas/ItemSpecs"
          },
          "menuId": {
            "type": "string"
          },
          "addonGroups": {
            "type": "array",
            "description": "Inline addon group definitions that can be selected with this item",
            "items": {
              "$ref": "#/components/schemas/ItemAddonGroup"
            }
          },
          "addonGroupIds": {
            "type": "array",
            "description": "References to reusable addon groups",
            "items": {
              "type": "string"
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "ItemSpecs": {
        "type": "object",
        "properties": {
          "allergens": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "calories": {
            "type": "number"
          },
          "protein": {
            "type": "number"
          },
          "carbs": {
            "type": "number"
          },
          "fat": {
            "type": "number"
          },
          "fiber": {
            "type": "number"
          }
        }
      },
      "AddonOption": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number",
            "format": "double",
            "description": "Price delta to apply when selected"
          },
          "isAvailable": {
            "type": "boolean",
            "default": true
          },
          "imageUrl": {
            "type": "string",
            "format": "uri"
          },
          "maxQuantity": {
            "type": "integer",
            "description": "Maximum quantity allowed for quantity-based selections"
          },
          "defaultQuantity": {
            "type": "integer",
            "description": "Default quantity when item is opened"
          },
          "isDefault": {
            "type": "boolean",
            "description": "Indicates if the option should be pre-selected"
          }
        },
        "required": ["id", "name", "price"]
      },
      "ItemAddonGroup": {
        "type": "object",
        "properties": {
          "groupId": {
            "type": "string",
            "description": "Reference ID of the addon group"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "selectionType": {
            "type": "string",
            "enum": ["single", "multiple", "quantity"],
            "default": "multiple"
          },
          "minSelect": {
            "type": "integer",
            "minimum": 0
          },
          "maxSelect": {
            "type": "integer",
            "minimum": 0
          },
          "isRequired": {
            "type": "boolean",
            "default": false
          },
          "options": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AddonOption"
            }
          }
        },
        "required": ["name", "selectionType", "options"]
      },
      "CartAddonSelection": {
        "type": "object",
        "properties": {
          "groupId": { "type": "string" },
          "groupName": { "type": "string" },
          "optionId": { "type": "string" },
          "optionName": { "type": "string" },
          "price": { "type": "number", "format": "double" },
          "quantity": { "type": "integer", "minimum": 1 }
        },
        "required": ["groupId", "optionId", "price", "quantity"]
      },
      "AddonGroup": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "description": { "type": "string" },
          "selectionType": {
            "type": "string",
            "enum": ["single", "multiple", "quantity"]
          },
          "minSelect": { "type": "integer" },
          "maxSelect": { "type": "integer" },
          "isRequired": { "type": "boolean" },
          "isActive": { "type": "boolean" },
          "menuId": { "type": "string" },
          "placeId": { "type": "string" },
          "appliesToCategoryIds": {
            "type": "array",
            "items": { "type": "string" }
          },
          "appliesToItemIds": {
            "type": "array",
            "items": { "type": "string" }
          },
          "options": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/AddonOption" }
          },
          "createdAt": { "type": "string", "format": "date-time" },
          "updatedAt": { "type": "string", "format": "date-time" }
        },
        "required": ["id", "name", "selectionType", "options"]
      },
      "AddonGroupQuery": {
        "type": "object",
        "properties": {
          "placeId": { "type": "string" },
          "menuId": { "type": "string" },
          "categoryId": { "type": "string" },
          "itemId": { "type": "string" },
          "isActive": { "type": "boolean" },
          "search": { "type": "string" }
        }
      },
      "CreateAddonGroupCommand": {
        "type": "object",
        "required": ["name", "selectionType", "options"],
        "properties": {
          "name": { "type": "string" },
          "description": { "type": "string" },
          "selectionType": {
            "type": "string",
            "enum": ["single", "multiple", "quantity"]
          },
          "minSelect": { "type": "integer" },
          "maxSelect": { "type": "integer" },
          "isRequired": { "type": "boolean" },
          "menuId": { "type": "string" },
          "placeId": { "type": "string" },
          "appliesToCategoryIds": {
            "type": "array",
            "items": { "type": "string" }
          },
          "appliesToItemIds": {
            "type": "array",
            "items": { "type": "string" }
          },
          "options": {
            "type": "array",
            "items": { "$ref": "#/components/schemas/AddonOption" }
          }
        }
      },
      "UpdateAddonGroupCommand": {
        "type": "object",
        "required": ["id"],
        "allOf": [
          { "$ref": "#/components/schemas/CreateAddonGroupCommand" },
          {
            "type": "object",
            "properties": {
              "id": { "type": "string" }
            }
          }
        ]
      },
      "Order": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "orderNumber": {
            "type": "string"
          },
          "placeId": {
            "type": "string"
          },
          "customer": {
            "$ref": "#/components/schemas/OrderCustomer"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrderItem"
            }
          },
          "status": {
            "type": "string",
            "enum": ["pending", "confirmed", "preparing", "ready", "completed", "cancelled"]
          },
          "type": {
            "type": "string",
            "enum": ["dine_in", "takeout", "delivery", "pickup"]
          },
          "subtotal": {
            "type": "number"
          },
          "tax": {
            "type": "number"
          },
          "serviceFee": {
            "type": "number"
          },
          "deliveryFee": {
            "type": "number"
          },
          "discount": {
            "type": "number"
          },
          "total": {
            "type": "number"
          },
          "lastUpdatedBy": {
            "type": "string"
          },
          "lastUpdatedAt": {
            "type": "string",
            "format": "date-time"
          },
          "source": {
            "type": "string",
            "enum": ["pos", "online", "mobile_app", "phone"]
          },
          "version": {
            "type": "number"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "OrderItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "itemId": {
            "type": "string"
          },
          "itemName": {
            "type": "string"
          },
          "itemPrice": {
            "type": "number"
          },
          "quantity": {
            "type": "number"
          },
          "specialInstructions": {
            "type": "string"
          },
          "totalPrice": {
            "type": "number"
          },
          "selectedAddons": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CartAddonSelection"
            }
          },
          "status": {
            "type": "string",
            "enum": ["pending", "preparing", "ready", "served", "cancelled"]
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "OrderCustomer": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "isGuest": {
            "type": "boolean"
          }
        }
      },
      "OrderPayment": {
        "type": "object",
        "properties": {
          "method": {
            "type": "string",
            "enum": ["cash", "card", "digital_wallet", "online"]
          },
          "status": {
            "type": "string",
            "enum": ["pending", "completed", "failed", "refunded"]
          },
          "amount": {
            "type": "number"
          },
          "transactionId": {
            "type": "string"
          },
          "processedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Cart": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "placeId": {
            "type": "string"
          },
          "customerId": {
            "type": "string"
          },
          "sessionId": {
            "type": "string"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CartItem"
            }
          },
          "status": {
            "type": "string",
            "enum": ["active", "abandoned", "converted"]
          },
          "subtotal": {
            "type": "number"
          },
          "tax": {
            "type": "number"
          },
          "serviceFee": {
            "type": "number"
          },
          "deliveryFee": {
            "type": "number"
          },
          "discount": {
            "type": "number"
          },
          "total": {
            "type": "number"
          },
          "expiresAt": {
            "type": "string",
            "format": "date-time"
          },
          "lastActivityAt": {
            "type": "string",
            "format": "date-time"
          },
          "source": {
            "type": "string",
            "enum": ["pos", "online", "mobile_app", "phone"]
          },
          "version": {
            "type": "number"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CartItem": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "itemId": {
            "type": "string"
          },
          "itemName": {
            "type": "string"
          },
          "itemPrice": {
            "type": "number"
          },
          "quantity": {
            "type": "number"
          },
          "specialInstructions": {
            "type": "string"
          },
          "totalPrice": {
            "type": "number"
          },
          "selectedAddons": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CartAddonSelection"
            }
          },
          "addonUnitTotal": {
            "type": "number",
            "description": "Sum of addon price deltas per unit"
          },
          "addedAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreatePlaceRequest": {
        "type": "object",
        "required": ["name", "address", "ownerId"],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "address": {
            "$ref": "#/components/schemas/Address"
          },
          "contact": {
            "$ref": "#/components/schemas/Contact"
          },
          "businessHours": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/BusinessHours"
            }
          },
          "settings": {
            "$ref": "#/components/schemas/PlaceSettings"
          },
          "ownerId": {
            "type": "string"
          }
        }
      },
      "UpdatePlaceRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "address": {
            "$ref": "#/components/schemas/Address"
          },
          "contact": {
            "$ref": "#/components/schemas/Contact"
          },
          "businessHours": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/BusinessHours"
            }
          },
          "settings": {
            "$ref": "#/components/schemas/PlaceSettings"
          },
          "status": {
            "type": "string",
            "enum": ["active", "inactive", "suspended", "pending_approval"]
          }
        }
      },
      "CreateItemRequest": {
        "type": "object",
        "required": ["name", "price", "categoryId", "menuId"],
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "categoryId": {
            "type": "string",
            "description": "Category ID from the categories entity (see /categories endpoint) OR category name as a string. Use this to reference a managed category entity or store a category name directly. Also accepts 'category' field for backward compatibility."
          },
          "category": {
            "type": "string",
            "description": "Category name as a string (alternative to categoryId). Use this to store category names directly in items without referencing the categories entity. For managed categories with metadata (description, displayOrder, isActive, etc.), use the categories endpoint and reference by categoryId."
          },
          "imageUrl": {
            "type": "string"
          },
          "isAvailable": {
            "type": "boolean",
            "default": true
          },
          "preparationTime": {
            "type": "number"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "specs": {
            "$ref": "#/components/schemas/ItemSpecs"
          },
          "menuId": {
            "type": "string"
          }
        }
      },
      "UpdateItemRequest": {
        "type": "object",
        "required": ["id"],
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "categoryId": {
            "type": "string",
            "description": "Category ID from the categories entity (see /categories endpoint) OR category name as a string. Use this to reference a managed category entity or store a category name directly. Also accepts 'category' field for backward compatibility."
          },
          "category": {
            "type": "string",
            "description": "Category name as a string (alternative to categoryId). Use this to store category names directly in items without referencing the categories entity. For managed categories with metadata (description, displayOrder, isActive, etc.), use the categories endpoint and reference by categoryId."
          },
          "imageUrl": {
            "type": "string"
          },
          "isAvailable": {
            "type": "boolean"
          },
          "preparationTime": {
            "type": "number"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "specs": {
            "$ref": "#/components/schemas/ItemSpecs"
          }
        }
      },
      "Category": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Category ID"
          },
          "name": {
            "type": "string",
            "description": "Category name"
          },
          "description": {
            "type": "string",
            "description": "Category description"
          },
          "menuId": {
            "type": "string",
            "description": "Reference to the menu this category belongs to"
          },
          "displayOrder": {
            "type": "integer",
            "description": "Order in which category appears in menu"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the category is active"
          },
          "imageUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL of the category image"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          }
        },
        "required": ["id", "name", "menuId", "isActive", "createdAt", "updatedAt"]
      },
      "CreateCategoryCommand": {
        "type": "object",
        "required": ["name", "menuId"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Category name"
          },
          "description": {
            "type": "string",
            "description": "Category description"
          },
          "menuId": {
            "type": "string",
            "description": "ID of the menu this category belongs to"
          },
          "displayOrder": {
            "type": "integer",
            "description": "Order in which category appears in menu",
            "minimum": 0
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the category is active",
            "default": true
          },
          "imageUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL of the category image"
          }
        }
      },
      "UpdateCategoryCommand": {
        "type": "object",
        "required": ["id"],
        "properties": {
          "id": {
            "type": "string",
            "description": "ID of the category to update"
          },
          "name": {
            "type": "string",
            "description": "Category name"
          },
          "description": {
            "type": "string",
            "description": "Category description"
          },
          "displayOrder": {
            "type": "integer",
            "description": "Order in which category appears in menu",
            "minimum": 0
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the category is active"
          },
          "imageUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL of the category image"
          }
        }
      },
      "CategoryQuery": {
        "type": "object",
        "properties": {
          "menuId": {
            "type": "string",
            "description": "Filter by menu ID"
          },
          "isActive": {
            "type": "boolean",
            "description": "Filter by active status"
          },
          "search": {
            "type": "string",
            "description": "Search term for category name or description"
          }
        }
      },
      "CreateOrderRequest": {
        "type": "object",
        "required": ["placeId", "customer", "items", "type", "payment", "lastUpdatedBy"],
        "properties": {
          "placeId": {
            "type": "string"
          },
          "customer": {
            "$ref": "#/components/schemas/OrderCustomer"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "itemId": {
                  "type": "string"
                },
                "itemName": {
                  "type": "string"
                },
                "itemPrice": {
                  "type": "number"
                },
                "quantity": {
                  "type": "number"
                },
                "specialInstructions": {
                  "type": "string"
                }
              }
            }
          },
          "type": {
            "type": "string",
            "enum": ["dine_in", "takeout", "delivery", "pickup"]
          },
          "payment": {
            "type": "object",
            "properties": {
              "method": {
                "type": "string",
                "enum": ["cash", "card", "digital_wallet", "online"]
              },
              "amount": {
                "type": "number"
              },
              "transactionId": {
                "type": "string"
              }
            }
          },
          "source": {
            "type": "string",
            "enum": ["pos", "online", "mobile_app", "phone"],
            "default": "pos"
          },
          "lastUpdatedBy": {
            "type": "string"
          }
        }
      },
      "UpdateOrderStatusRequest": {
        "type": "object",
        "required": ["id", "status", "lastUpdatedBy"],
        "properties": {
          "id": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "confirmed", "preparing", "ready", "completed", "cancelled"]
          },
          "lastUpdatedBy": {
            "type": "string"
          }
        }
      },
      "CreateCartRequest": {
        "type": "object",
        "required": ["placeId", "source"],
        "properties": {
          "placeId": {
            "type": "string"
          },
          "customerId": {
            "type": "string"
          },
          "sessionId": {
            "type": "string"
          },
          "source": {
            "type": "string",
            "enum": ["pos", "online", "mobile_app", "phone"]
          }
        }
      },
      "UpdateCartRequest": {
        "type": "object",
        "required": ["id"],
        "properties": {
          "id": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": ["active", "abandoned", "converted"]
          },
          "lastActivityAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "CreateMenuRequest": {
        "type": "object",
        "required": ["placeId", "name"],
        "properties": {
          "placeId": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          }
        }
      },
      "AddItemToCartCommand": {
        "type": "object",
        "required": ["cartId", "itemId", "itemName", "itemPrice", "quantity"],
        "properties": {
          "cartId": {
            "type": "string",
            "description": "ID of the cart"
          },
          "itemId": {
            "type": "string",
            "description": "ID of the menu item"
          },
          "itemName": {
            "type": "string",
            "description": "Name of the menu item"
          },
          "itemPrice": {
            "type": "number",
            "format": "double",
            "description": "Price of the item"
          },
          "quantity": {
            "type": "integer",
            "description": "Quantity of the item"
          },
          "specialInstructions": {
            "type": "string",
            "description": "Special instructions for the item"
          },
          "selectedAddons": {
            "type": "array",
            "description": "List of addon selections applied to the item",
            "items": {
              "$ref": "#/components/schemas/CartAddonSelection"
            }
          }
        }
      },
      "UpdateCartItemCommand": {
        "type": "object",
        "required": ["cartId", "itemId", "quantity"],
        "properties": {
          "cartId": {
            "type": "string",
            "description": "ID of the cart"
          },
          "itemId": {
            "type": "string",
            "description": "ID of the cart item"
          },
          "quantity": {
            "type": "integer",
            "description": "New quantity of the item"
          },
          "specialInstructions": {
            "type": "string",
            "description": "Special instructions for the item"
          },
          "selectedAddons": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CartAddonSelection"
            }
          }
        }
      },
      "ApplyDiscountCommand": {
        "type": "object",
        "required": ["cartId", "discountCode", "discountType"],
        "properties": {
          "cartId": {
            "type": "string",
            "description": "ID of the cart"
          },
          "discountCode": {
            "type": "string",
            "description": "Discount code to apply"
          },
          "discountAmount": {
            "type": "number",
            "format": "double",
            "description": "Discount amount (optional)"
          },
          "discountType": {
            "type": "string",
            "enum": ["percentage", "fixed"],
            "description": "Type of discount"
          }
        }
      },
      "ConvertCartToOrderCommand": {
        "type": "object",
        "required": ["cartId", "customer", "payment", "orderType", "lastUpdatedBy"],
        "properties": {
          "cartId": {
            "type": "string",
            "description": "ID of the cart to convert"
          },
          "customer": {
            "$ref": "#/components/schemas/OrderCustomer"
          },
          "payment": {
            "$ref": "#/components/schemas/OrderPayment"
          },
          "orderType": {
            "type": "string",
            "enum": ["dine_in", "takeout", "delivery", "pickup"],
            "description": "Type of order"
          },
          "lastUpdatedBy": {
            "type": "string",
            "description": "User ID who is converting the cart"
          }
        }
      },
      "CreateItemCommand": {
        "type": "object",
        "required": ["name", "price", "menuId"],
        "anyOf": [
          { "required": ["categoryId"] },
          { "required": ["category"] }
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the menu item"
          },
          "description": {
            "type": "string",
            "description": "Description of the item"
          },
          "price": {
            "type": "number",
            "format": "double",
            "description": "Price of the item"
          },
          "categoryId": {
            "type": "string",
            "description": "Category ID from the categories entity (see /categories endpoint) OR category name as a string. Use this to reference a managed category entity or store a category name directly. Also accepts 'category' field for backward compatibility."
          },
          "category": {
            "type": "string",
            "description": "Category name as a string (alternative to categoryId). Use this to store category names directly in items without referencing the categories entity. For managed categories with metadata (description, displayOrder, isActive, etc.), use the categories endpoint and reference by categoryId."
          },
          "imageUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL of the item image"
          },
          "isAvailable": {
            "type": "boolean",
            "description": "Whether the item is available",
            "default": true
          },
          "preparationTime": {
            "type": "integer",
            "description": "Preparation time in minutes"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of ingredients"
          },
          "specs": {
            "$ref": "#/components/schemas/ItemSpecs"
          },
          "menuId": {
            "type": "string",
            "description": "ID of the menu this item belongs to"
          },
          "addonGroups": {
            "type": "array",
            "description": "Inline addon groups available for this item",
            "items": {
              "$ref": "#/components/schemas/ItemAddonGroup"
            }
          },
          "addonGroupIds": {
            "type": "array",
            "description": "References to reusable addon groups associated with this item",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "UpdateItemCommand": {
        "type": "object",
        "required": ["id"],
        "properties": {
          "id": {
            "type": "string",
            "description": "ID of the item to update"
          },
          "name": {
            "type": "string",
            "description": "Name of the menu item"
          },
          "description": {
            "type": "string",
            "description": "Description of the item"
          },
          "price": {
            "type": "number",
            "format": "double",
            "description": "Price of the item"
          },
          "categoryId": {
            "type": "string",
            "description": "Category ID from the categories entity (see /categories endpoint) OR category name as a string. Use this to reference a managed category entity or store a category name directly. Also accepts 'category' field for backward compatibility."
          },
          "category": {
            "type": "string",
            "description": "Category name as a string (alternative to categoryId). Use this to store category names directly in items without referencing the categories entity. For managed categories with metadata (description, displayOrder, isActive, etc.), use the categories endpoint and reference by categoryId."
          },
          "imageUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL of the item image"
          },
          "isAvailable": {
            "type": "boolean",
            "description": "Whether the item is available"
          },
          "preparationTime": {
            "type": "integer",
            "description": "Preparation time in minutes"
          },
          "ingredients": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of ingredients"
          },
          "specs": {
            "$ref": "#/components/schemas/ItemSpecs"
          },
          "addonGroups": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ItemAddonGroup"
            }
          },
          "addonGroupIds": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "ItemQuery": {
        "type": "object",
        "properties": {
          "menuId": {
            "type": "string",
            "description": "Filter by menu ID"
          },
          "categoryId": {
            "type": "string",
            "description": "Filter by category ID"
          },
          "isAvailable": {
            "type": "boolean",
            "description": "Filter by availability"
          },
          "search": {
            "type": "string",
            "description": "Search term for name or description"
          }
        }
      },
      "CartStatistics": {
        "type": "object",
        "properties": {
          "totalCarts": {
            "type": "integer",
            "description": "Total number of carts"
          },
          "activeCarts": {
            "type": "integer",
            "description": "Number of active carts"
          },
          "abandonedCarts": {
            "type": "integer",
            "description": "Number of abandoned carts"
          },
          "convertedCarts": {
            "type": "integer",
            "description": "Number of converted carts"
          },
          "averageCartValue": {
            "type": "number",
            "format": "double",
            "description": "Average cart value"
          },
          "totalRevenue": {
            "type": "number",
            "format": "double",
            "description": "Total revenue from converted carts"
          },
          "conversionRate": {
            "type": "number",
            "format": "double",
            "description": "Cart conversion rate percentage"
          }
        }
      },
      "PopularCartItem": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "string",
            "description": "ID of the menu item"
          },
          "itemName": {
            "type": "string",
            "description": "Name of the menu item"
          },
          "totalQuantity": {
            "type": "integer",
            "description": "Total quantity ordered across all carts"
          },
          "totalRevenue": {
            "type": "number",
            "format": "double",
            "description": "Total revenue from this item"
          },
          "cartCount": {
            "type": "integer",
            "description": "Number of carts containing this item"
          }
        }
      },
      "CreateOrderCommand": {
        "type": "object",
        "required": ["placeId", "customer", "items", "type", "payment", "lastUpdatedBy"],
        "properties": {
          "placeId": {
            "type": "string",
            "description": "ID of the place this order belongs to"
          },
          "customer": {
            "$ref": "#/components/schemas/OrderCustomer"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "itemId": {
                  "type": "string",
                  "description": "ID of the menu item"
                },
                "itemName": {
                  "type": "string",
                  "description": "Name of the menu item"
                },
                "itemPrice": {
                  "type": "number",
                  "format": "double",
                  "description": "Price of the item"
                },
                "quantity": {
                  "type": "integer",
                  "description": "Quantity of the item"
                },
                "specialInstructions": {
                  "type": "string",
                  "description": "Special instructions for the item"
                  },
                  "selectedAddons": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/CartAddonSelection"
                    }
                }
              },
              "required": ["itemId", "itemName", "itemPrice", "quantity"]
            },
            "description": "List of items in the order"
          },
          "type": {
            "type": "string",
            "enum": ["dine_in", "takeout", "delivery", "pickup"],
            "description": "Type of order"
          },
          "payment": {
            "$ref": "#/components/schemas/OrderPayment"
          },
          "source": {
            "type": "string",
            "enum": ["pos", "online", "mobile_app", "phone"],
            "description": "Source of the order",
            "default": "pos"
          },
          "lastUpdatedBy": {
            "type": "string",
            "description": "User ID who created the order"
          }
        }
      },
      "UpdateOrderStatusCommand": {
        "type": "object",
        "required": ["status", "lastUpdatedBy"],
        "properties": {
          "status": {
            "type": "string",
            "enum": ["pending", "confirmed", "preparing", "ready", "completed", "cancelled"],
            "description": "New status of the order"
          },
          "lastUpdatedBy": {
            "type": "string",
            "description": "User ID who made the update"
          }
        }
      },
      "OrderQuery": {
        "type": "object",
        "properties": {
          "placeId": {
            "type": "string",
            "description": "Filter by place ID"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "confirmed", "preparing", "ready", "completed", "cancelled"],
            "description": "Filter by order status"
          },
          "type": {
            "type": "string",
            "enum": ["dine_in", "takeout", "delivery", "pickup"],
            "description": "Filter by order type"
          },
          "customerId": {
            "type": "string",
            "description": "Filter by customer ID"
          },
          "dateFrom": {
            "type": "string",
            "format": "date-time",
            "description": "Filter orders from this date"
          },
          "dateTo": {
            "type": "string",
            "format": "date-time",
            "description": "Filter orders to this date"
          },
          "orderNumber": {
            "type": "string",
            "description": "Filter by order number"
          },
          "source": {
            "type": "string",
            "enum": ["pos", "online", "mobile_app", "phone"],
            "description": "Filter by order source"
          }
        }
      },
      "RealtimeOrderResponse": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["connection", "orders_update", "order_update", "heartbeat"],
            "description": "Type of real-time message"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Order"
            },
            "description": "Array of orders (for orders_update type)"
          },
          "count": {
            "type": "integer",
            "description": "Number of orders in the response"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of the update"
          },
          "message": {
            "type": "string",
            "description": "Message for connection type"
          },
          "orderId": {
            "type": "string",
            "description": "Order ID (for single order updates)"
          }
        }
      },
      "ActiveConnectionsResponse": {
        "type": "object",
        "properties": {
          "activeConnections": {
            "type": "integer",
            "description": "Number of active connections"
          },
          "connections": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of connection IDs"
          }
        }
      },
      "Attachment": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique attachment ID",
            "example": "attachment123"
          },
          "fileName": {
            "type": "string",
            "description": "Generated unique file name",
            "example": "example_a1b2c3d4.png"
          },
          "originalFileName": {
            "type": "string",
            "description": "Original file name from upload",
            "example": "example.png"
          },
          "fileType": {
            "type": "string",
            "description": "File extension without dot",
            "example": "png"
          },
          "mimeType": {
            "type": "string",
            "description": "MIME type of the file",
            "example": "image/png"
          },
          "fileSize": {
            "type": "integer",
            "description": "File size in bytes",
            "example": 1024
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Public URL to access the attachment",
            "example": "https://storage.googleapis.com/bucket/attachments/example_a1b2c3d4.png"
          },
          "storagePath": {
            "type": "string",
            "description": "Path in Firebase Storage",
            "example": "attachments/example_a1b2c3d4.png"
          },
          "uploadedBy": {
            "type": "string",
            "description": "User ID who uploaded the file",
            "example": "user123"
          },
          "relatedEntityType": {
            "type": "string",
            "description": "Type of related entity (e.g., 'item', 'menu', 'place')",
            "example": "item"
          },
          "relatedEntityId": {
            "type": "string",
            "description": "ID of the related entity",
            "example": "item456"
          },
          "metadata": {
            "type": "object",
            "description": "Additional metadata",
            "additionalProperties": true,
            "example": {
              "description": "Item image"
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp",
            "example": "2024-01-15T10:30:00.000Z"
          }
        },
        "required": ["id", "fileName", "originalFileName", "fileType", "mimeType", "fileSize", "url", "storagePath", "createdAt", "updatedAt"]
      },
      "UploadAttachmentRequest": {
        "type": "object",
        "required": ["file", "fileName", "mimeType"],
        "properties": {
          "file": {
            "type": "string",
            "format": "byte",
            "description": "Base64 encoded file content or data URL (e.g., 'data:image/png;base64,...')",
            "example": "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg=="
          },
          "fileName": {
            "type": "string",
            "description": "Original file name",
            "example": "example.png"
          },
          "mimeType": {
            "type": "string",
            "description": "MIME type of the file (e.g., 'image/png', 'image/jpeg', 'application/pdf')",
            "example": "image/png",
            "enum": [
              "image/jpeg",
              "image/jpg",
              "image/png",
              "image/gif",
              "image/webp",
              "image/svg+xml",
              "application/pdf",
              "application/msword",
              "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
              "application/vnd.ms-excel",
              "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
            ]
          },
          "uploadedBy": {
            "type": "string",
            "description": "User ID who uploaded the file (optional)",
            "example": "user123"
          },
          "relatedEntityType": {
            "type": "string",
            "description": "Type of related entity (optional, e.g., 'item', 'menu', 'place')",
            "example": "item"
          },
          "relatedEntityId": {
            "type": "string",
            "description": "ID of the related entity (optional)",
            "example": "item456"
          },
          "folder": {
            "type": "string",
            "description": "Folder path in storage (optional, default: 'attachments')",
            "example": "attachments"
          },
          "metadata": {
            "type": "object",
            "description": "Additional metadata (optional)",
            "additionalProperties": true,
            "example": {
              "description": "Item image"
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Health",
      "description": "Health check and system status endpoints"
    },
    {
      "name": "Menu",
      "description": "Menu management operations"
    },
    {
      "name": "Items",
      "description": "Menu item management operations"
    },
    {
      "name": "Place",
      "description": "Restaurant/place management operations"
    },
    {
      "name": "Orders",
      "description": "Order management operations"
    },
    {
      "name": "Real-time",
      "description": "Real-time order tracking and updates"
    },
    {
      "name": "Cart",
      "description": "Shopping cart management operations"
    },
    {
      "name": "Auth",
      "description": "User authentication operations"
    },
    {
      "name": "Attachments",
      "description": "File attachment management operations"
    },
    {
      "name": "Categories",
      "description": "Menu category management operations"
    },
    {
      "name": "Addons",
      "description": "Addon group management operations"
    }
  ]
}
